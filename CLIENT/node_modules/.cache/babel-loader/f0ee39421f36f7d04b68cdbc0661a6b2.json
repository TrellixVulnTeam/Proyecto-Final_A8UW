{"ast":null,"code":"import _objectSpread from \"G:/CURSO HENRRY/PROYECTO FINAL/PF2/FRONT/14/PF-BarberApp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"G:/CURSO HENRRY/PROYECTO FINAL/PF2/FRONT/14/PF-BarberApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"G:\\\\CURSO HENRRY\\\\PROYECTO FINAL\\\\PF2\\\\FRONT\\\\14\\\\PF-BarberApp\\\\src\\\\components\\\\admin\\\\Dashboard\\\\ReservasBarras.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Bar } from \"react-chartjs-2\";\nimport { Chart, LinearScale, BarElement, PointElement, BarController, CategoryScale } from \"chart.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChart.register(LinearScale, BarElement, PointElement, BarController, CategoryScale);\nexport var ReservasBarras = function ReservasBarras() {\n  _s();\n\n  var meses = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n  var hoy = new Date();\n\n  var _React$useState = React.useState({\n    date: new Date(hoy.getMonth() + 1 + \"-\" + hoy.getDate() + \"-\" + hoy.getFullYear() + \" 00:00:00\")\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      dia = _React$useState2[0],\n      setDia = _React$useState2[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state;\n  }),\n      allCitas = _useSelector.allCitas;\n\n  var citasFecha = [];\n  var citasCant = [];\n\n  function calcular_fecha_correcta(diaCorrecto, mesCorrecto, añoCorrecto, i) {\n    if (diaCorrecto < 1) {\n      mesCorrecto--;\n\n      if (mesCorrecto < 0) {\n        mesCorrecto = 11;\n        añoCorrecto--;\n      }\n\n      diaCorrecto = meses[mesCorrecto] + i;\n    } else {\n      if (diaCorrecto > meses[mesCorrecto]) {\n        mesCorrecto++;\n\n        if (mesCorrecto > 11) {\n          mesCorrecto = 0;\n          añoCorrecto++;\n          diaCorrecto = i - meses[11];\n        } else {\n          diaCorrecto = i - meses[mesCorrecto - 1];\n        }\n      }\n    }\n\n    return [mesCorrecto + 1 + \"-\" + diaCorrecto + \"-\" + añoCorrecto, diaCorrecto + \"-\" + (mesCorrecto + 1) + \"-\" + añoCorrecto];\n  }\n\n  for (var i = dia.date.getDate() - 7; i <= dia.date.getDate() + 7; i++) {\n    var diaCorrecto = i;\n    var mesCorrecto = dia.date.getMonth();\n    var añoCorrecto = dia.date.getFullYear();\n    var fecha2 = calcular_fecha_correcta(diaCorrecto, mesCorrecto, añoCorrecto, i);\n    var fechaDateIni = new Date(fecha2[0] + \" 00:00:00\");\n    var fecha1 = calcular_fecha_correcta(diaCorrecto + 1, mesCorrecto, añoCorrecto, i + 1);\n    var fechaDateFin = new Date(fecha1[0] + \" 00:00:00\");\n    var cont = 0;\n\n    for (var _i = 0; _i < allCitas.length; _i++) {\n      var dateCita = new Date(allCitas[_i].date);\n\n      if (dateCita < fechaDateFin && dateCita > fechaDateIni) {\n        cont++;\n      }\n    }\n\n    citasFecha.push(fecha2[1]);\n    citasCant.push(cont);\n  }\n\n  var data = {\n    labels: citasFecha,\n    datasets: [{\n      label: \"Citas\",\n      backgroundColor: \"rgba(255, 224, 130,1)\",\n      borderColor: \"black\",\n      borderWidth: 1,\n      hoverBackgroundColor: \"rgba(255, 224, 130,0.2)\",\n      hoverBorderColor: \"#FFFF00\",\n      data: citasCant\n    }]\n  };\n  var opciones = {\n    maintainAspectRatio: false,\n    responsive: true\n  };\n\n  var handleChange = function handleChange(e) {\n    e.preventDefault();\n    setDia(_objectSpread(_objectSpread({}, dia), {}, {\n      date: new Date(e.target.value + \" 00:00:00\")\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col text-center\",\n    style: {\n      width: \"100%\",\n      height: \"600px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-center\",\n      children: \"Citas Reservadas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"date\",\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"100%\",\n        height: \"480px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Bar, {\n        data: data,\n        options: opciones\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ReservasBarras, \"CEBWw1fg532wspx48RDtZJH5od8=\", false, function () {\n  return [useSelector];\n});\n\n_c = ReservasBarras;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReservasBarras\");","map":{"version":3,"names":["React","useSelector","Bar","Chart","LinearScale","BarElement","PointElement","BarController","CategoryScale","register","ReservasBarras","meses","hoy","Date","useState","date","getMonth","getDate","getFullYear","dia","setDia","state","allCitas","citasFecha","citasCant","calcular_fecha_correcta","diaCorrecto","mesCorrecto","añoCorrecto","i","fecha2","fechaDateIni","fecha1","fechaDateFin","cont","length","dateCita","push","data","labels","datasets","label","backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","opciones","maintainAspectRatio","responsive","handleChange","e","preventDefault","target","value","width","height"],"sources":["G:/CURSO HENRRY/PROYECTO FINAL/PF2/FRONT/14/PF-BarberApp/src/components/admin/Dashboard/ReservasBarras.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport {\r\n  Chart,\r\n  LinearScale,\r\n  BarElement,\r\n  PointElement,\r\n  BarController,\r\n  CategoryScale,\r\n} from \"chart.js\";\r\nChart.register(\r\n  LinearScale,\r\n  BarElement,\r\n  PointElement,\r\n  BarController,\r\n  CategoryScale\r\n);\r\n\r\nexport const ReservasBarras = () => {\r\n  const meses = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n  var hoy = new Date();\r\n  const [dia, setDia] = React.useState({\r\n    date: new Date(\r\n      hoy.getMonth() +\r\n        1 +\r\n        \"-\" +\r\n        hoy.getDate() +\r\n        \"-\" +\r\n        hoy.getFullYear() +\r\n        \" 00:00:00\"\r\n    ),\r\n  });\r\n  const { allCitas } = useSelector((state) => state);\r\n  const citasFecha = [];\r\n  const citasCant = [];\r\n  function calcular_fecha_correcta(diaCorrecto, mesCorrecto, añoCorrecto, i) {\r\n    if (diaCorrecto < 1) {\r\n      mesCorrecto--;\r\n      if (mesCorrecto < 0) {\r\n        mesCorrecto = 11;\r\n        añoCorrecto--;\r\n      }\r\n      diaCorrecto = meses[mesCorrecto] + i;\r\n    } else {\r\n      if (diaCorrecto > meses[mesCorrecto]) {\r\n        mesCorrecto++;\r\n        if (mesCorrecto > 11) {\r\n          mesCorrecto = 0;\r\n          añoCorrecto++;\r\n          diaCorrecto = i - meses[11];\r\n        } else {\r\n          diaCorrecto = i - meses[mesCorrecto - 1];\r\n        }\r\n      }\r\n    }\r\n    return [\r\n      mesCorrecto + 1 + \"-\" + diaCorrecto + \"-\" + añoCorrecto,\r\n      diaCorrecto + \"-\" + (mesCorrecto + 1) + \"-\" + añoCorrecto,\r\n    ];\r\n  }\r\n  for (let i = dia.date.getDate() - 7; i <= dia.date.getDate() + 7; i++) {\r\n    var diaCorrecto = i;\r\n    var mesCorrecto = dia.date.getMonth();\r\n    var añoCorrecto = dia.date.getFullYear();\r\n    var fecha2 = calcular_fecha_correcta(\r\n      diaCorrecto,\r\n      mesCorrecto,\r\n      añoCorrecto,\r\n      i\r\n    );\r\n    var fechaDateIni = new Date(fecha2[0] + \" 00:00:00\");\r\n    var fecha1 = calcular_fecha_correcta(\r\n      diaCorrecto + 1,\r\n      mesCorrecto,\r\n      añoCorrecto,\r\n      i + 1\r\n    );\r\n    var fechaDateFin = new Date(fecha1[0] + \" 00:00:00\");\r\n    const cont = 0;\r\n    for (let i = 0; i < allCitas.length; i++) {\r\n      var dateCita = new Date(allCitas[i].date);\r\n      if (dateCita < fechaDateFin && dateCita > fechaDateIni) {\r\n        cont++;\r\n      }\r\n    }\r\n    citasFecha.push(fecha2[1]);\r\n    citasCant.push(cont);\r\n  }\r\n  const data = {\r\n    labels: citasFecha,\r\n    datasets: [\r\n      {\r\n        label: \"Citas\",\r\n        backgroundColor: \"rgba(255, 224, 130,1)\",\r\n        borderColor: \"black\",\r\n        borderWidth: 1,\r\n        hoverBackgroundColor: \"rgba(255, 224, 130,0.2)\",\r\n        hoverBorderColor: \"#FFFF00\",\r\n        data: citasCant,\r\n      },\r\n    ],\r\n  };\r\n  const opciones = {\r\n    maintainAspectRatio: false,\r\n    responsive: true,\r\n  };\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n    setDia({\r\n      ...dia,\r\n      date: new Date(e.target.value + \" 00:00:00\"),\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"col text-center\" style={{ width: \"100%\", height: \"600px\" }}>\r\n      <h3 className=\"text-center\">Citas Reservadas</h3>\r\n      <input type={\"date\"} onChange={handleChange} />\r\n      <div style={{ width: \"100%\", height: \"480px\" }}>\r\n        <Bar data={data} options={opciones} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}