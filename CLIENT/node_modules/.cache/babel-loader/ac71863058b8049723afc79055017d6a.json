{"ast":null,"code":"import _regeneratorRuntime from \"G:/CURSO HENRRY/PROYECTO FINAL/PF2/FRONT/14/PF-BarberApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"G:/CURSO HENRRY/PROYECTO FINAL/PF2/FRONT/14/PF-BarberApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _jsxFileName = \"G:\\\\CURSO HENRRY\\\\PROYECTO FINAL\\\\PF2\\\\FRONT\\\\14\\\\PF-BarberApp\\\\src\\\\components\\\\Profile\\\\navbar\\\\Navbar.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport \"./Navbar.css\";\nimport { logout, revalidarAuth } from \"../../../redux/actions\";\nimport sinImage from '../../../assets/sin-img.jpeg';\nimport { fetchConTokenFiles } from \"../../../helpers/fetch\";\nimport Swal from \"sweetalert2\";\nimport { validarArchivo } from \"../../../helpers/validar-archivo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var Navbar = function Navbar() {\n  _s();\n\n  var _useSelector = useSelector(function (state) {\n    return state;\n  }),\n      user = _useSelector.user,\n      isAuth = _useSelector.isAuth;\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n\n  var handleLogout = function handleLogout() {\n    dispatch(logout());\n    history.replace(\"/\");\n  };\n\n  var selectImage = function selectImage() {\n    document.querySelector('#img_user').click();\n  };\n\n  var changeImg = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {\n      var target, arrType, extencion, fileValido, resp, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              target = _ref.target;\n              // validaciones\n              arrType = target.files[0].type.split('/');\n              extencion = arrType[arrType.length - 1];\n              fileValido = validarArchivo(extencion);\n              console.log(fileValido);\n\n              if (!(fileValido === true)) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.next = 8;\n              return fetchConTokenFiles(\"upload/usuario/\".concat(user.id), target.files[0], 'POST');\n\n            case 8:\n              resp = _context.sent;\n              _context.next = 11;\n              return resp.json();\n\n            case 11:\n              data = _context.sent;\n\n              if (data.ok) {\n                dispatch(revalidarAuth());\n                Swal.fire('Success', 'Imagen actualizada correctamente', 'success');\n              }\n\n              _context.next = 16;\n              break;\n\n            case 15:\n              Swal.fire('Error', fileValido, 'error');\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function changeImg(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"navbar-profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"img-perfil\",\n      onClick: selectImage,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: user.img ? user.img : sinImage,\n        alt: user.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      id: \"img_user\",\n      onChange: changeImg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: user.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"mt-3 list-group list-group-flush\",\n      children: [/*#__PURE__*/_jsxDEV(NavLink, {\n        exact: true,\n        className: \"list-group-item text-dark\",\n        activeClassName: \"bg-warning\",\n        to: \"/profile/compras\",\n        children: \"Mis Compras\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(NavLink, {\n        exact: true,\n        className: \"list-group-item pointer\",\n        activeClassName: \"bg-warning\",\n        to: \"/profile/reservas\",\n        children: \"Mis Reservas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(NavLink, {\n        exact: true,\n        className: \"list-group-item pointer\",\n        activeClassName: \"bg-warning\",\n        to: \"/profile/editar\",\n        children: \"Perfil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(NavLink, {\n        exact: true,\n        activeClassName: \"bg-warning\",\n        className: \"list-group-item pointer\",\n        to: \"/\",\n        children: \"Volver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, _this), isAuth && user.rol === \"ADMIN\" && /*#__PURE__*/_jsxDEV(NavLink, {\n        className: \"list-group-item\",\n        activeClassName: \"bg-warning\",\n        to: \"/admin/main\",\n        children: \"Administrador\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(NavLink, {\n        onClick: handleLogout,\n        exact: true,\n        activeClassName: \"bg-warning\",\n        className: \"list-group-item pointer\",\n        to: \"/\",\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Navbar, \"UuSwO4RAkwlbvAC+8nYk6+4SGZA=\", false, function () {\n  return [useSelector, useDispatch, useHistory];\n});\n\n_c = Navbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"names":["React","NavLink","useHistory","useDispatch","useSelector","logout","revalidarAuth","sinImage","fetchConTokenFiles","Swal","validarArchivo","Navbar","state","user","isAuth","dispatch","history","handleLogout","replace","selectImage","document","querySelector","click","changeImg","target","arrType","files","type","split","extencion","length","fileValido","console","log","id","resp","json","data","ok","fire","img","name","rol"],"sources":["G:/CURSO HENRRY/PROYECTO FINAL/PF2/FRONT/14/PF-BarberApp/src/components/Profile/navbar/Navbar.js"],"sourcesContent":["import React from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"./Navbar.css\";\r\nimport {\r\n  logout,\r\n  revalidarAuth,\r\n} from \"../../../redux/actions\";\r\nimport sinImage from '../../../assets/sin-img.jpeg'\r\nimport { fetchConTokenFiles } from \"../../../helpers/fetch\";\r\nimport Swal from \"sweetalert2\";\r\nimport { validarArchivo } from \"../../../helpers/validar-archivo\";\r\n\r\nexport const Navbar = () => {\r\n  const { user, isAuth } = useSelector((state) => state);\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleLogout = () => {\r\n    dispatch(logout());\r\n    history.replace(\"/\");\r\n  };\r\n\r\n  const selectImage = () => {\r\n    document.querySelector('#img_user').click()\r\n  }\r\n  \r\n  const changeImg = async({target}) => {\r\n\r\n    // validaciones\r\n    const arrType = target.files[0].type.split('/');\r\n    const extencion = arrType[arrType.length - 1];\r\n    const fileValido = validarArchivo(extencion)\r\n    console.log(fileValido)\r\n\r\n    if(fileValido === true){\r\n      const resp = await fetchConTokenFiles(`upload/usuario/${user.id}`, target.files[0], 'POST');\r\n      const data = await resp.json();\r\n  \r\n      if(data.ok){\r\n        dispatch(revalidarAuth())\r\n        Swal.fire('Success', 'Imagen actualizada correctamente', 'success')\r\n      }\r\n    }else{\r\n      Swal.fire('Error', fileValido, 'error')\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <nav className=\"navbar-profile\">\r\n      <div className=\"img-perfil\" onClick={selectImage}>\r\n        <img src={user.img ? user.img : sinImage} alt={user.name} />\r\n      </div>\r\n      <input type=\"file\" id=\"img_user\" onChange={changeImg} />\r\n      <h1>{user.name}</h1>\r\n\r\n      <ul className=\"mt-3 list-group list-group-flush\">\r\n        <NavLink\r\n          exact\r\n          className=\"list-group-item text-dark\"\r\n          activeClassName=\"bg-warning\"\r\n          to=\"/profile/compras\"\r\n        >\r\n          Mis Compras\r\n        </NavLink>\r\n\r\n        <NavLink\r\n          exact\r\n          className=\"list-group-item pointer\"\r\n          activeClassName=\"bg-warning\"\r\n          to=\"/profile/reservas\"\r\n        >\r\n          Mis Reservas\r\n        </NavLink>\r\n        <NavLink\r\n          exact\r\n          className=\"list-group-item pointer\"\r\n          activeClassName=\"bg-warning\"\r\n          to=\"/profile/editar\"\r\n        >\r\n          Perfil\r\n        </NavLink>\r\n        <NavLink\r\n          exact\r\n          activeClassName=\"bg-warning\"\r\n          className=\"list-group-item pointer\"\r\n          to=\"/\"\r\n        >\r\n          Volver\r\n        </NavLink>\r\n\r\n        {isAuth && user.rol === \"ADMIN\" && (\r\n          <NavLink\r\n            className=\"list-group-item\"\r\n            activeClassName=\"bg-warning\"\r\n            to=\"/admin/main\"\r\n          >\r\n            Administrador\r\n          </NavLink>\r\n        )}\r\n        <NavLink\r\n          onClick={handleLogout}\r\n          exact\r\n          activeClassName=\"bg-warning\"\r\n          className=\"list-group-item pointer\"\r\n          to=\"/\"\r\n        >\r\n          Logout\r\n        </NavLink>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}